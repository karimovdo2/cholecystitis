# app.py
# Streamlit-ะพะฟัะพัะฝะธะบ: 17 ะฟัะตะดะธะบัะพัะพะฒ  โ ยซะทะฐะณะปััะบะฐยป-ะฟัะพะณะฝะพะท ัะพะปะตัะธััะธัะฐ
# ะทะฐะฟัััะธัั:  streamlit run app.py
import streamlit as st
import numpy as np
import random

st.set_page_config(
    page_title="ะัะตะดัะบะฐะทะฐะฝะธะต ัะพะปะตัะธััะธัะฐ",
    page_icon="๐ฉบ",
    layout="centered",
)

# โโโโโโโโโโโโโโโโโโโโโโโโโโโโโ  ััะธะปะธ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
st.markdown(
    """
    <style>
      @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap');
      html, body, [class*="css"]  { font-family: 'Inter', sans-serif; }
      .block-container              { padding-top: 2rem; }
      .stButton>button               { width: 100%; border-radius: 8px;
                                       background: linear-gradient(90deg,#6366f1,#7c3aed);
                                       color:#fff; font-weight:600; height:3rem;}
      .stButton>button:hover         { background:#6366f1; }
      .title-h1                      { text-align:center; font-size:2rem;
                                       font-weight:700; margin-bottom:1.5rem; }
      .subtitle                      { font-size:1.25rem; font-weight:600;
                                       margin-top:1.5rem; margin-bottom:0.5rem; }
    </style>
    """,
    unsafe_allow_html=True,
)

st.markdown('<div class="title-h1">๐ฉบ ะะฟัะพัะฝะธะบ ัะธัะบะฐ ัะพะปะตัะธััะธัะฐ</div>', unsafe_allow_html=True)

# โโโโโโโโโโโโโโโโโโโโโโโโโโโโโ  ะฟัะตะดะธะบัะพัั  โโโโโโโโโโโโโโโโโโโโโโโโโ
FEATURES = [
    'ะกัะตะฟะตะฝั ัะธะฑัะพะทะฐ ะฟะพ ัะปะฐััะพะผะตััะธะธ',
    '1 ะฑะปะพะบ - ะฟัะธัะธัะตัะบะฐั ะธ ัะพัะธะฐะปัะฝะฐั ะฐะดะฐะฟัะฐัะธั ะฝะต ะฝะฐัััะฐะตััั',
    'ัะบััะตัะฝะฐะปัะฝัะน ัะธะฟ ะฟะธัะตะฒะพะณะพ ะฟะพะฒะตะดะตะฝะธั',
    'ะงะฐััะพัะฐ ะฟัะธะตะผะฐ ะฟะธัะธ 1-2 ัะฐะทะฐ -1, 3 ัะฐะทะฐ -2, 4 ะธ ะฑะพะปะตะต ัะฐะท -3',
    'St-index - ะธะฝะดะตะบั ััะตะฐัะพะทะฐ ( ะฒะพะทัะฐัั, ัะพัั, ะพะบััะถะฝะพััั ัะฐะปะธะธ, ะกะ)',
    'ะกัะตะฟะตะฝั ััะตะฐัะพะทะฐ ะฟะพ ัะปะฐััะพะผะตััะธะธ',
    'ะะฐะทะฝะพะพะฑัะฐะทะฝะพะต ะฟะธัะฐะฝะธะต ะดะฐ-1, ะฝะตั-0',
    'ะะฐัะปะตะดััะฒะตะฝะฝะพััั ะพััะณะพัะตะฝะฐ ั ะฑะปะธะทะบะธั ัะพะดััะฒะตะฝะฝะธะบะพะฒ ะฟะพ ะฅะะฅ-1, ะะะ-2, ัะธััะพะท ะฟะตัะตะฝะธ-3, ัั.ะณะตะฟะฐัะธั-4',
    'ะะะ23+ ',
    '2 ะฑะปะพะบ - ะธะฝััะฐะฟัะธัะธัะตัะบะฐั ะฝะฐัะฟะฐะฒะปะตะฝะฝะพััััะตะฐะณะธัะพะฒะฐะฝะธั ะฝะฐ ะฑะพะปะตะทะฝั',
    'ะะะข',
    'ะะฑัะธะน ัะพะปะตััะตัะธะฝ',
    'ะะตัะตััะฒั ะผะตะถะดั ะฟัะธะตะผะฐะผะธ ะฟะธัะธ 2-4 ัะฐัะฐ -1, 6 ะธ ะฑะพะปะตะต ัะฐัะพะฒ-2, ะฒ ัะฐะทะฝัะต ะดะฝะธ ะทะฝะฐัะธัะตะปัะฝะพ ะพัะปะธัะฐัััั -3',
    'FLI - ะธะฝะดะตะบั ััะตะฐัะพะทะฐ ะฟะตัะตะฝะธ (ัะพัั, ะฒะตั, ะพะบัะพัะถะฝะพััั ัะฐะปะธะธ, ะะะขะ, ะขะ)',
    'ะขะ',
    'ะ-ัะธะณะฐัะตัั',
    'HSI - ะธะฝะดะตะบั ััะตะฐัะพะทะฐ ะฟะตัะตะฝะธ ( ะฟะพะป, ะะะข, ะะะข, ะะกะข, ะกะ)'
]

# ะะฐัะตะณะพัะธัะตัะบะธะต ะฟัะธะทะฝะฐะบะธ (ะดะฐ/ะฝะตั ะธะปะธ ัะธะบัะธัะพะฒะฐะฝะฝัะต ะบะพะดั)
CATEGORICAL = {
    '1 ะฑะปะพะบ - ะฟัะธัะธัะตัะบะฐั ะธ ัะพัะธะฐะปัะฝะฐั ะฐะดะฐะฟัะฐัะธั ะฝะต ะฝะฐัััะฐะตััั': ["0 โ ะฝะฐัััะฐะตััั", "1 โ ะฝะต ะฝะฐัััะฐะตััั"],
    'ัะบััะตัะฝะฐะปัะฝัะน ัะธะฟ ะฟะธัะตะฒะพะณะพ ะฟะพะฒะตะดะตะฝะธั': ["0 โ ะฝะตั", "1 โ ะตััั"],
    'ะงะฐััะพัะฐ ะฟัะธะตะผะฐ ะฟะธัะธ 1-2 ัะฐะทะฐ -1, 3 ัะฐะทะฐ -2, 4 ะธ ะฑะพะปะตะต ัะฐะท -3': ["-1", "-2", "-3"],
    'ะะฐะทะฝะพะพะฑัะฐะทะฝะพะต ะฟะธัะฐะฝะธะต ะดะฐ-1, ะฝะตั-0': ["0 โ ะฝะตั", "1 โ ะดะฐ"],
    'ะะฐัะปะตะดััะฒะตะฝะฝะพััั ะพััะณะพัะตะฝะฐ ั ะฑะปะธะทะบะธั ัะพะดััะฒะตะฝะฝะธะบะพะฒ ะฟะพ ะฅะะฅ-1, ะะะ-2, ัะธััะพะท ะฟะตัะตะฝะธ-3, ัั.ะณะตะฟะฐัะธั-4':
        ["0 โ ะฝะตั", "1 โ ะฅะะฅ", "2 โ ะะะ", "3 โ ัะธััะพะท", "4 โ ัั.ะณะตะฟะฐัะธั"],
    'ะะะ23+ ': ["0 โ ะฝะตั", "1 โ ะดะฐ"],
    '2 ะฑะปะพะบ - ะธะฝััะฐะฟัะธัะธัะตัะบะฐั ะฝะฐัะฟะฐะฒะปะตะฝะฝะพััััะตะฐะณะธัะพะฒะฐะฝะธั ะฝะฐ ะฑะพะปะตะทะฝั': ["0", "1"],
    'ะ-ัะธะณะฐัะตัั': ["0 โ ะฝะตั", "1 โ ะดะฐ"],
    'ะะตัะตััะฒั ะผะตะถะดั ะฟัะธะตะผะฐะผะธ ะฟะธัะธ 2-4 ัะฐัะฐ -1, 6 ะธ ะฑะพะปะตะต ัะฐัะพะฒ-2, ะฒ ัะฐะทะฝัะต ะดะฝะธ ะทะฝะฐัะธัะตะปัะฝะพ ะพัะปะธัะฐัััั -3': ["-1", "-2", "-3"]
}

# โโโโโโโโโโโโโโโโโโโโโโโโโโโโโ  ัะพัะผะฐ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
with st.form("predict_form"):
    for feat in FEATURES:
        st.markdown(f'<div class="subtitle">{feat}</div>', unsafe_allow_html=True)
        if feat in CATEGORICAL:
            val = st.selectbox("", CATEGORICAL[feat], key=feat)
        else:
            val = st.number_input("", value=0.0, format="%.2f", key=feat)
        st.session_state[feat] = val
    submitted = st.form_submit_button("ะะฐัััะธัะฐัั")

# โโโโโโโโโโโโโโโโโโโโโโโโโโโโ  ยซะทะฐะณะปััะบะฐยป ะฟัะพะณะฝะพะท  โโโโโโโโโโโโโโโโโโ
if submitted:
    st.markdown("---")
    prob = round(random.uniform(0.05, 0.95), 3)   # ะฟัะตะฒะดะพ-ะฒะตัะพััะฝะพััั
    cls  = "โ ะฅะพะปะตัะตััะธั ะะะะะะะขะกะฏ" if prob >= 0.5 else "๐ข ะฅะพะปะตัะตััะธั ะะ ะฟัะพะณะฝะพะทะธััะตััั"
    st.markdown(f"### ะะตัะพััะฝะพััั ัะพะปะตัะธััะธัะฐ: **{prob}**")
    st.success(cls)
